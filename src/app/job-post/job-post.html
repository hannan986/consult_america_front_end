<div class="job-post-card">
  <h2>üöÄ Post a New Job</h2>
  <form (ngSubmit)="submitJob()" #jobForm="ngForm" novalidate>
    
    <!-- Title -->
    <div class="form-row">
      <label for="title">Job Title<span>*</span></label>
      <input type="text" id="title" [(ngModel)]="job.title" name="title" required>
    </div>

    <!-- Contact Email -->
    <div class="form-row">
      <label for="email">Contact Email<span>*</span></label>
      <input type="email" id="email" [(ngModel)]="job.contactEmail" name="contactEmail" required>
    </div>

    <!-- Location -->
    <div class="form-row">
      <label for="location">Location</label>
      <input type="text" id="location" [(ngModel)]="job.location" name="location" placeholder="e.g. Remote, NYC, Berlin">
    </div>

    <!-- Employment Type -->
    <div class="form-row">
      <label for="type">Employment Type</label>
      <select id="type" [(ngModel)]="job.employmentType" name="type">
        <option value="">-- Select --</option>
        <option>Full-time</option>
        <option>Part-time</option>
        <option>Contract</option>
      </select>
    </div>

    <!-- Tech Stack & Client -->
    <div class="form-row inline">
      <div>
        <label for="tech">Tech Stack: </label>
        <input type="text" id="tech" [(ngModel)]="job.technologyStack" name="techStack" placeholder="e.g. Angular, Java, AWS">
      </div>
      <div>
        <label for="client">Client Name:</label>
        <input type="text" id="client" [(ngModel)]="job.clientName" name="clientName" placeholder="  e.g. Google">
      </div>
    </div>

    <!-- Description -->
    <div class="form-row">
      <label for="description">Job Description</label>
      <textarea id="description" rows="6" [(ngModel)]="job.description" name="description" placeholder="Write the job description..."></textarea>
    </div>


    <!-- Submit Button -->
    <div class="btn-row">
      <button type="submit" [disabled]="submitting">
        {{ submitting ? 'üöß Posting...' : '‚úÖ Post Job' }}
      </button>
    </div>

    <!-- Resume Auto-Edit: upload or paste a resume to auto-insert missing skills -->
    <div class="resume-auto-edit">
      <h3>Auto-edit Resume (match to job)</h3>
      <div class="form-row">
        <label for="resumeFile">Upload Resume (text)</label>
        <input id="resumeFile" type="file" accept=".txt,text/*" (change)="onResumeFileSelected($event)" />
        <div class="small muted">Or paste resume text below</div>
      </div>

      <div class="form-row">
        <label for="resumeText">Resume Text (editable)</label>
        <textarea id="resumeText" rows="8" [(ngModel)]="resumeText" name="resumeText" placeholder="Paste or upload resume text here"></textarea>
      </div>

      <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
        <button class="btn" type="button" (click)="autoEditResume()" [disabled]="!job.title && !job.description">‚úèÔ∏è Auto-edit Resume</button>
        <button class="btn" type="button" (click)="downloadEditedResume()" [disabled]="!editedResumeText">‚¨áÔ∏è Download Edited Resume</button>
        <div class="muted">{{ resumeFileName ? ('Loaded: ' + resumeFileName) : '' }}</div>
      </div>

      <div class="form-row">
        <label>Edited Resume Preview</label>
        <textarea rows="10" readonly [value]="editedResumeText"></textarea>
      </div>
    </div>

    <!-- Message -->
    <p class="msg" *ngIf="message">{{ message }}</p>
  </form>
</div>
